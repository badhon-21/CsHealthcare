@model CsHealthcare.ViewModel.Patient.InPatientDischargeDraftModel

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style type="text/css">
    @@page {
        size: auto;
        margin: 0;
    }

    @@media print {
        .printOnly {
            display: block;
        }
        /* write your css rules*/
        .form-group {
            margin-bottom: 2px;
        }

        .hide-from-printer {
            display: none;
        }

        .page-content {
            padding: 0 !important;
        }

        .print-nopadding {
            padding: 0 !important;
        }
    }
    /*for desktop*/
    @@media screen {
        .printOnly {
            display: none;
        }
        /*for all display view*/

    }
</style>

@using (Html.BeginForm("Draft", "InPatientDischarge", new { area = "PatientInformation" }, FormMethod.Post, new { @id = "sale_form", @class = "" }))
{
    <div ng-app="">
        <div class="row">

            <div class="col-xs-12 printOnly">
                <hgroup class="title-group text-center" style="margin: 5px 0; padding: 0">
                    <h3>Better Life Hospital</h3>
                    <h5 class="subtitle">1 East Rampura, D.I.T. Road , Dhaka-1219</h5>
                    @*<h5 class="subtitle">Training On Basic Biotechnology</h5>*@
                </hgroup>
            </div>

            <div class="col-md-12  hide-from-printer" id="searchdetails">
                <div class="portlet light">
                    <div class="portlet-title">
                        <div class="caption">
                            <i class="fa fa-question font-green-sharp"></i>
                            <span class="caption-subject font-green-sharp uppercase">Patient Search</span>
                        </div>
                        <div class="tools">
                            <a href="javascript:;" class="collapse">
                            </a>
                            <a href="javascript:;" class="fullscreen">
                            </a>
                        </div>
                        <div class="actions margin-right-10">

                        </div>
                    </div>
                    <div class="portlet-body portlet-empty" style="min-height: 150px; margin-top: 0px">
                        <div class="modal-body">
                            <div class="form-horizontal">

                                <div class="col-md-12">
                                    <div class="form-group col-md-5 ">
                                        <div class="control-label col-md-5 text-right" style="margin-left: 0px">Patient Code</div>
                                        <div class="col-md-7" style="margin-left: 0px">
                                            <input id="txtPatientCode" name="txtPatientCode" value="" class="form-control " />
                                        </div>
                                    </div>
                                    <div class="form-group col-md-2 ">
                                        <div style="display: ;" id="">
                                            <div class="actions ">
                                                <a class="btn btn-circle green-jungle" style="width: 70% !important;" onclick="javascript: getPatientInformation(); ">
                                                    <i class="fa fa-search"></i> Search
                                                </a>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="col-md-12">

                                        <div class="control-label col-md-4 text-center" style="margin-left: 0px">Patient Name</div>
                                        <div class="col-md-7" style="margin-left: 0px">
                                            <input id="txtPatientName" name="txtPatientName" value="" class="form-control " />
                                        </div>


                                    </div>
                                </div>

                                <div class="col-md-12">


                                    <div class="col-md-12" style="margin-top: 0px">

                                    </div>



                                </div>

                                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                <input type="hidden" id="pId" name="pId" value="" />
                                <input type="hidden" id="tId" name="tId" value="" />
                                <input type="hidden" id="PatientId" name="PatientId" value="" />
                                <input type="hidden" id="CabinId" name="CabinId" value="" />
                                <input type="hidden" id="BedId" name="BedId" value="" />
                                <input type="hidden" id="WardId" name="WardId" value="" />
                                <input type="hidden" id="PackageId" name="PackageId" value="" />
                                <input type="hidden" id="AdmissionNo" name="AdmissionNo" value="" />
                            </div>

                            <br /><br />

                        </div>

                    </div>
                </div>
            </div>


        </div>
    </div>
    <div>



        <div class="row">

            <div class="col-md-12" id="">
                <div class="portlet light">
                    <div class="portlet-title hide-from-printer">
                        <div class="caption">
                            <i class="fa fa-question font-green-sharp"></i>
                            <span class="caption-subject font-green-sharp uppercase">Patient  Details</span>
                        </div>
                        <div class="tools">
                            <a href="javascript:;" class="collapse">
                            </a>
                            <a href="javascript:;" class="fullscreen">
                            </a>
                        </div>
                        <div class="actions margin-right-10">

                        </div>
                    </div>
                    <div class="portlet-body portlet-empty" style="min-height: 450px; margin-top: 20px">
                        <div class="modal-body">
                            <div class="form-horizontal">
                                @*<div class="caption">
                                        <i class="fa fa-question font-green-sharp"></i>
                                        <span class="caption-subject font-green-sharp uppercase">Test Information</span>
                                    </div>*@
                                <br />
                                <div class="col-md-12 row form-group">
                                    <div class="col-md-12">
                                        <div class="col-md-6">
                                            <div class="col-xs-6">Date Of Admission :</div>
                                            <div class="col-xs-6">
                                                <input id="DateOfAdmission" name="DateOfAdmission" class="form-control datetimepicker" type="datetime" placeholder="Pick a date" />

                                            </div>
                                        </div>

                                        @*<div class="col-md-3">
                                                <input id="Discount" name="Discount" class="form-control twodigitdecimalnumber" placeholder="Discount" oninput="calculate()" />
                                            </div>*@

                                        <div class="col-md-6">
                                            <div class="col-xs-6">Patient Code :</div>
                                            <div class="col-xs-6">
                                                <input id="PatientCode" name="PatientCode" class="form-control " placeholder="Patient Code" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12 row form-group">
                                    <div class="col-md-12">
                                        <div class="col-md-6">
                                            <div class="col-xs-6">Voucher Number :</div>
                                            <div class="col-xs-6">
                                                <input id="VoucherNo" name="VoucherNo" class="form-control" value="" />
                                            </div>
                                        </div>

                                        @*<div class="col-md-3">
                                                <input id="Discount" name="Discount" class="form-control twodigitdecimalnumber" placeholder="Discount" oninput="calculate()" />
                                            </div>*@

                                        <div class="col-md-6">
                                            <div class="col-xs-6">Patient Name :</div>
                                            <div class="col-xs-6">
                                                <input id="PatientName" name="PatientName" class="form-control " placeholder="Patient Name" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-12 row form-group">
                                    <div class="col-md-12">
                                        <div class="col-md-6">
                                            <div class="col-xs-6">Cabin Price :</div>
                                            <div class="col-xs-6">
                                                <input id="CabinPrice" name="CabinPrice" class="form-control" value="" />
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="col-xs-6">Discharge Date :</div>
                                            <div class="col-xs-6">
                                                <input id="DischargeDate" name="DischargeDate" class="form-control " value="@DateTime.Today.ToString("d")" placeholder="Discharge Date" />
                                            </div>
                                        </div>


                                    </div>
                                </div>
                                <div class="col-md-12 row form-group">
                                    <div class="col-md-12">
                                        <div class="col-md-6">
                                            <div class="col-xs-6">Package Name :</div>
                                            <div class="col-xs-6">
                                                <input id="PackageName" name="PackageName" class="form-control" value="" />
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="col-xs-6">Package Amount :</div>
                                            <div class="col-xs-6">
                                                <input id="PackageAmount" name="PackageAmount" class="form-control " placeholder="Amount" />
                                            </div>
                                        </div>


                                    </div>
                                </div>
                                <div class="col-md-12 row form-group">
                                    <div class="col-md-12">
                                        <div class="col-md-6" id="due" style="display:">
                                            <div class="col-md-6">Admission Fee:</div>
                                            <div class="col-md-6">
                                                <input id="AdmissionFee" name="AdmissionFee" class="form-control" placeholder="Admission Fee" />
                                            </div>
                                        </div>

                                        <div class="col-md-6" id="return" style="display:">
                                            <div class="col-md-6">Transferred Cabin :</div>
                                            <div class="col-md-6">
                                                <input id="TransferredCabinName" name="TransferredCabinName" class="form-control " value="" placeholder="Transferred Cabin Name" />
                                            </div>
                                        </div>


                                    </div>
                                </div>
                                <div class="col-md-12 row form-group">
                                    <div class="col-md-12">
                                        @*<div class="col-md-6" id="due" style="display:">
                                                <div class="col-md-6">Admission Fee:</div>
                                                <div class="col-md-6">
                                                    <input id="AdmissionFee" name="AdmissionFee" class="form-control" placeholder="Admission Fee" />
                                                </div>
                                            </div>*@

                                        <div class="col-md-6" id="return" style="display:">
                                            <div class="col-md-6">Transferred Cabin Price:</div>
                                            <div class="col-md-6">
                                                <input id="TransferredCabinPrice" name="TransferredCabinPrice" class="form-control " value="0" placeholder="Transferred Cabin Price" />
                                            </div>
                                        </div>


                                    </div>
                                </div>
                                <div class="row">

                                    <div class="col-md-12" id="">
                                        <div class="portlet light">
                                            <div class="portlet-title hide-from-printer">
                                                <div class="caption">
                                                    <i class="fa fa-question font-green-sharp"></i>
                                                    <span class="caption-subject font-green-sharp uppercase">Daily Bills Information</span>
                                                </div>
                                                <div class="tools" id="dailydetails">
                                                    <a href="javascript:;" class="collapse">
                                                    </a>
                                                    <a href="javascript:;" class="fullscreen">
                                                    </a>
                                                </div>
                                                <div class="actions margin-right-10 hide-from-printer">

                                                </div>
                                            </div>
                                            <div class="portlet-body portlet-empty" style="min-height: 300px; margin-top: 10px">
                                                <div class="modal-body">
                                                    <div class="form-horizontal">
                                                        @*<div class="caption">
                                                                <i class="fa fa-question font-green-sharp"></i>
                                                                <span class="caption-subject font-green-sharp uppercase">Test Information</span>
                                                            </div>*@
                                                        <br />
                                                        <div class="col-md-12 row form-group" id="getDailyBill">
                                                        </div>
                                                        <div class="col-md-12 row form-group" id="getDailyDoctorBill">
                                                        </div>

                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">

                                    <div class="col-md-12">
                                        <div class="portlet light">
                                            <div class="portlet-title hide-from-printer">
                                                <div class="caption">
                                                    <i class="fa fa-question font-green-sharp"></i>
                                                    <span class="caption-subject font-green-sharp uppercase">Drug Bills Information</span>
                                                </div>
                                                <div class="tools" id="drugdetails">
                                                    <a href="javascript:;" class="collapse">
                                                    </a>
                                                    <a href="javascript:;" class="fullscreen">
                                                    </a>
                                                </div>
                                                <div class="actions margin-right-10 ">

                                                </div>
                                            </div>
                                            <div class="portlet-body portlet-empty" style="min-height: 300px; margin-top: 10px">
                                                <div class="modal-body">
                                                    <div class="form-horizontal">
                                                        @*<div class="caption">
                                                                <i class="fa fa-question font-green-sharp"></i>
                                                                <span class="caption-subject font-green-sharp uppercase">Test Information</span>
                                                            </div>*@
                                                        <br />


                                                        <div class="col-md-12 row form-group" id="DrugBill">
                                                        </div>
                                                        <div class="col-md-12 row form-group" id="DrugReturnBill">
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">

                                    <div class="col-md-12">
                                        <div class="portlet light">
                                            <div class="portlet-title hide-from-printer">
                                                <div class="caption">
                                                    <i class="fa fa-question font-green-sharp"></i>
                                                    <span class="caption-subject font-green-sharp uppercase">Test Bills Information</span>
                                                </div>
                                                <div class="tools" id="testdetails">
                                                    <a href="javascript:;" class="collapse">
                                                    </a>
                                                    <a href="javascript:;" class="fullscreen">
                                                    </a>
                                                </div>
                                                <div class="actions margin-right-10 hide-from-printer">

                                                </div>
                                            </div>
                                            <div class="portlet-body portlet-empty" style="min-height: 300px; margin-top: 10px">
                                                <div class="modal-body">
                                                    <div class="form-horizontal">
                                                        @*<div class="caption">
                                                                <i class="fa fa-question font-green-sharp"></i>
                                                                <span class="caption-subject font-green-sharp uppercase">Test Information</span>
                                                            </div>*@
                                                        <br />

                                                        <div class="col-md-12 row form-group" id="TestBill">
                                                        </div>
                                                    </div>
                                                    <button id="btnPrint" onclick="myFunction()" class="btn btn-lg blue hidden-print margin-bottom-5" style="background-color: #1e90ff; color: white;float: right;">Print <i class="icon-printer2"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row hide-from-printer">

                                    <div class="col-md-12" id="total">
                                        <div class="portlet light">
                                            <div class="portlet-title">
                                                <div class="caption">
                                                    <i class="fa fa-question font-green-sharp"></i>
                                                    <span class="caption-subject font-green-sharp uppercase">Patient Total Bills Information</span>
                                                </div>
                                                <div class="tools">
                                                    <a href="javascript:;" class="collapse">
                                                    </a>
                                                    <a href="javascript:;" class="fullscreen">
                                                    </a>
                                                </div>
                                                <div class="actions margin-right-10">

                                                </div>
                                            </div>
                                            <div class="portlet-body portlet-empty" style="min-height: 450px; margin-top: 20px">
                                                <div class="modal-body">
                                                    <div class="form-horizontal">
                                                        @*<div class="caption">
                                                                <i class="fa fa-question font-green-sharp"></i>
                                                                <span class="caption-subject font-green-sharp uppercase">Test Information</span>
                                                            </div>*@
                                                        <br />
                                                        <div class="col-md-12 row form-group">

                                                            <div class="col-md-12 row form-group">
                                                                <div class="col-md-12">
                                                                    <div class="col-md-6">
                                                                        <div class="col-md-6">Daily Bills :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="InPatientDailyBill" name="InPatientDailyBill" class="form-control" value="" />
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-md-6">
                                                                        <div class="col-md-6">Patient Pharmacy Bill :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="InPatientDrugBill" name="InPatientDrugBill" class="form-control " value="@DateTime.Today.ToString("d")" placeholder="Discharge Date" />
                                                                        </div>
                                                                    </div>


                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 row form-group">
                                                                <div class="col-md-12">
                                                                    <div class="col-md-6">
                                                                        <div class="col-md-6">Total Test Bills :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="InPatientTotalTestBills" name="InPatientTotalTestBills" class="form-control" value="" />
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-md-6">
                                                                        <div class="col-md-6">Patient Doctor Bills :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="InPatientDoctorBills" name="InPatientDoctorBills" class="form-control " value="" placeholder="Discharge Date" />
                                                                        </div>
                                                                    </div>


                                                                </div>
                                                            </div>

                                                            <div class="col-md-12 row form-group">
                                                                <div class="col-md-12">
                                                                    <div class="col-md-6" id="due" style="display:">
                                                                        <div class="col-md-6">NoOf Days :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="NoOfDays" name="NoOfDays" class="form-control" value="" />
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-md-6" id="return" style="display:">
                                                                        <div class="col-md-6">Total Cabin Amount :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="CabinAmount" name="CabinAmount" class="form-control " value="" placeholder="Cabin Amount" />
                                                                        </div>
                                                                    </div>


                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 row form-group">
                                                                <div class="col-md-12">
                                                                    <div class="col-md-6" id="due" style="display:">
                                                                        <div class="col-md-6">10% Service Charge :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="ServiceCharge" name="ServiceCharge" class="form-control" value="" />
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-md-6" id="return" style="display:">
                                                                        <div class="col-md-6">Total ICU Bill :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="ICUBill" name="ICUBill" class="form-control " value="" placeholder="Cabin Amount" />
                                                                        </div>
                                                                    </div>


                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 row form-group">
                                                                <div class="col-md-12">
                                                                    <div class="col-md-6" id="due" style="display:">
                                                                        <div class="col-md-6">OT Bill :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="OtBill" name="OTBill" class="form-control" value="" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6" id="due" style="display:">
                                                                        <div class="col-md-6">Transferred Cabin Bill :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="TransferredCabinBill" name="TransferredCabinBill" class="form-control" value="" />
                                                                        </div>
                                                                    </div>



                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 row form-group">
                                                                <div class="col-md-12">
                                                                    <div class="col-md-6">
                                                                        <div class="col-md-6">Total Bill:</div>
                                                                        <div class="col-md-6">
                                                                            <input id="TotalBill" name="TotalBill" class="form-control" value="" />
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-md-6">
                                                                        <div class="col-md-6">Advance Amount :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="InPatientAdvanceAmount" name="InPatientAdvanceAmount" class="form-control " value="" placeholder="Advance Amount" />
                                                                        </div>
                                                                    </div>


                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 row form-group">
                                                                <div class="col-md-12">
                                                                    <div class="col-md-6" id="due" style="display: ">
                                                                        <div class="col-md-6">Due Amount :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="DueAmount" name="DueAmount" class="form-control" value="" />
                                                                        </div>
                                                                    </div>

                                                                    <div class="col-md-6" id="return" style="display: ">
                                                                        <div class="col-md-6">Hospital Discount :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="Discount" name="Discount" class="form-control " value="" placeholder="Discount" oninput="Calculate()" />
                                                                        </div>
                                                                    </div>


                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 row form-group">
                                                                <div class="col-md-12">
                                                                    <div class="col-md-6" id="due" style="display: ">
                                                                        <div class="col-md-6">After Hospital Discount Due:</div>
                                                                        <div class="col-md-6">
                                                                            <input id="AfterHospital" name="AfterHospital" class="form-control" placeholder="Due Bill" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6" id="due" style="display: ">
                                                                        <div class="col-md-6">Discount Reason :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="DiscountReason" name="DiscountReason" class="form-control" value="" />
                                                                        </div>
                                                                    </div>




                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 row form-group">
                                                                <div class="col-md-12">
                                                                    <div class="col-md-6" id="return" style="display: ">
                                                                        <div class="col-md-6">Doctor Discount :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="DoctorDiscount" name="DoctorDiscount" class="form-control " value="" placeholder="Doctor Discount" oninput="Calculate1()" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6" id="return" style="display: ">
                                                                        <div class="col-md-6">After Doctor Discount Due:</div>
                                                                        <div class="col-md-6">
                                                                            <input id="AfterDoctor" name="ReturnDoctor" class="form-control " value="" placeholder="Due Bill" />
                                                                        </div>
                                                                    </div>





                                                                </div>
                                                            </div>
                                                            <div class="col-md-12 row form-group">
                                                                <div class="col-md-12">
                                                                    <div class="col-md-6" id="due" style="display: ">
                                                                        <div class="col-md-6">Doctor Name For Discount:</div>
                                                                        <div class="col-md-6">
                                                                            <input id="NameOfDoctorOnDiscount" name="NameOfDoctorOnDiscount" class="form-control" placeholder="Doctor Name" />
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-md-6" id="return" style="display: ">
                                                                        <div class="col-md-6">After All Discount Total Bill :</div>
                                                                        <div class="col-md-6">
                                                                            <input id="ReturnAmount" name="ReturnAmount" class="form-control " value="" placeholder="Return Amount" />
                                                                        </div>
                                                                    </div>



                                                                </div>
                                                            </div>
                                                        </div>

                                                        <br /><br /><br /><br />
                                                        <div class="row ">
                                                            <div class="" style="text-align: center;">

                                                                <a class="btn default" style="width: 15%;margin-top: 60px" href="@Url.Action("Index", "InPatientDischarge", new {Area = "PatientInfromation"})">Cancel</a>
                                                                <input id="btnSave" type="submit" value="Save" class="btn green" style="width: 15%;margin-top: 60px" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- END Portlet PORTLET-->
                                        </div>
                                    </div>



                                </div>

                                <br /><br /><br /><br />

                            </div>
                        </div>
                    </div>

                    <!-- END Portlet PORTLET-->
                </div>
            </div>



        </div>

    </div>


        <div id='myModal' class='modal fade in' tabindex="-1" data-backdrop="static" data-keyboard="false" style="margin: 0 auto;background-color: #fff; width: 600px;">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div id='myModalContent'></div>
                </div>
            </div>
        </div>
}

@section page_styles
{
    <link href="~/assets/global/plugins/jcrop/css/jquery.Jcrop.css" rel="stylesheet" />
    <link href="~/assets/global/plugins/jquery-file-upload/css/jquery.fileupload.css" rel="stylesheet" />
    <link href="~/assets/global/plugins/typeahead/typeahead.css" rel="stylesheet" />
    @*<link href="~/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet"/>*@
    <link href="~/assets/global/plugins/select2/css/select2.css" rel="stylesheet" />
    <link href="~/Assets/global/plugins/bootstrap-summernote/summernote.css" rel="stylesheet" />

    <style>
        .tt-query {
            -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
            -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
            box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
        }

        .tt-hint {
            color: #999;
        }

        .tt-dropdown-menu { /* used to be tt-dropdown-menu in older versions */
            width: 422px;
            margin-top: 4px;
            padding: 4px 0;
            background-color: #fff;
            border: 1px solid #ccc;
            border: 1px solid rgba(0, 0, 0, 0.2);
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
            -webkit-box-shadow: 0 5px 10px rgba(0,0,0,.2);
            -moz-box-shadow: 0 5px 10px rgba(0,0,0,.2);
            box-shadow: 0 5px 10px rgba(0,0,0,.2);
        }

        .tt-suggestion {
            padding: 3px 20px;
            line-height: 24px;
        }

            .tt-suggestion.tt-cursor, .tt-suggestion:hover {
                color: #fff;
                background-color: #0097cf;
            }

            .tt-suggestion p {
                margin: 0;
            }
    </style>
}


@section Scripts {
    <script src="~/Scripts/angular.min.js"></script>

    <script src="~/Scripts/typeahead.bundle.min.js"></script>
    <script src="~/scripts/jquery.format.1.05.js"></script>
    <script type="text/javascript" src="~/Assets/global/plugins/select2/js/select2.min.js"></script>
    @*<script src="~/assets/global/plugins/jcrop/js/jquery.Jcrop.js"></script>*@
    @*<script src="~/assets/global/plugins/jquery-file-upload/js/vendor/jquery.ui.widget.js"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.iframe-transport.js"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.fileupload.js"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-process.js"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-image.js"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-validate.js"></script>
        <script src="~/assets/global/plugins/jquery-file-upload/js/jquery.fileupload-ui.js"></script>*@


    <script src="~/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>

    <script src="~/assets/pages/components-pickers.js"></script>

    <script src="~/assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>

    <script type="text/javascript">
            jQuery(document).ready(function () {
                allowInt();
                initPatientCodeAutoComplete();


                //$("#Discount").keyup(function () {
                //    var GrandTotal = parseFloat($("#DueAmount").val());
                //    var GivenAmount = parseFloat($("#Discount").val());
                //    //var DeuAmount = parseFloat($("#DeuPrice").val());
                //    var DueAmount = (GrandTotal - GivenAmount);

                //    $("#DeuAmount").val(DueAmount);
                //    //Calculate();
                //});
                //initDoctorAutoComplete();

                //$('#txtPatientType').val('Old');

                //$(".datetimepicker").datepicker();

                //ComponentsPickers.init();
                //$('#txtDateOfBirth').val(getTodate());
                //$('#AdvanceType').on('change', function () {
                //    AdvanceType();

                //});

            });
            function myFunction() {
                //Get the print button and put it into a variable
                var printButton = document.getElementById("btnPrint");
                var button = document.getElementById("total");
                var sale = document.getElementById("testdetails");
                var cancelButton = document.getElementById("drugdetails");
                var dailyButton = document.getElementById("dailydetails");
                //var patientButton = document.getElementById("toolsdetails");
                var searchButton = document.getElementById("searchdetails");
                //var dateButton = document.getElementById("dateadmission");
                //var voucher = document.getElementById("voucher");
                //var cabin = document.getElementById("cabin");
                //var capt = document.getElementById("capt");

                //Set the print button visibility to 'hidden'
                printButton.style.visibility = 'hidden';
                button.style.visibility = 'hidden';
                sale.style.visibility = 'hidden';
                cancelButton.style.visibility = 'hidden';
                dailyButton.style.visibility = 'hidden';
                //patientButton.style.visibility = 'hidden';
                searchButton.style.visibility = 'hidden';
                //dateButton.style.visibility = 'hidden';
                //voucher.style.visibility = 'hidden';
                //cabin.style.visibility = 'hidden';
                //capt.style.visibility = 'hidden';
                //Print the page content
                window.print();
                //Set the print button to 'visible' again
                //[Delete this line if you want it to stay hidden after printing]
                printButton.style.visibility = 'visible';
                button.style.visibility = 'visible';
                sale.style.visibility = 'visible';
                cancelButton.style.visibility = 'visible';
                dailyButton.style.visibility = 'visible';
                //patientButton.style.visibility = 'visible';
                searchButton.style.visibility = 'visible';
                //dateButton.style.visibility = 'visible';
                //voucher.style.visibility = 'visible';
                //cabin.style.visibility = 'visible';
                //capt.style.visibility = 'visible';
            }

            function getTodate() {
                var dob = new Date();
                var day = (dob.getDate() < 10 ? '0' : '') + dob.getDate();
                var month = ((dob.getMonth() + 1) < 10 ? '0' : '') + (dob.getMonth() + 1);
                return (month + "/" + day + "/" + dob.getFullYear());
            }

            function allowInt() {
                $(".integer").format({ precision: 0, allow_negative: false, autofix: true });
            }


            function initPatientCodeAutoComplete() {
                $('#txtPatientCode').typeahead({
                    hint: true,
                    highlight: true,
                    minLength: 2,
                    limit: 8
                }, {
                    source: function (searchString, cb) {
                        return $.ajax({
                            dataType: 'json',
                            type: 'POST',
                            contentType: "application/json; charset=utf-8",
                            url: " /PatientInformation/InPatientDischarge/LoadPatientCode",
                            data: "{'SearchString':'" + searchString + "'}",
                            chache: false,
                            success: function (data) {
                                var result = [];
                                $.each(data, function (index, val) {
                                    result.push({
                                        Id: val.Id,
                                        Name: val.PatientCode,
                                        value: val.PatientCode

                                    });
                                });
                                cb(result);
                            }
                        });
                    }
                }).on("typeahead:selected", function (obj, patient) {
                    $("#tId").val(patient.Id);
                    getPatientId();
                    //$("#txtPatientName").val(patient.Name);
                    //$("#txtMobileNumber").val(patient.Mobile);
                });

            }
            function getPatientId() {
                $.ajax({

                    type: "GET",
                    cache: false,
                    url: "@(@Url.Action("GetPatientId", "InPatientDischarge", new {Area = "PatientInformation" }))",
                    data: { "Id": $("#tId").val(), "PatientCode": $("#txtPatientCode").val() },
                    dataType: "html",
                    success: function (result) {

                        var t = JSON.parse(result);

                        $('#PatientId').val(t);

                    },
                    error: function (error) {
                        //Metronic.unblockUI();
                        var msg = 'Fail to load .';
                        alert(msg);
                    }
                });
            }

            function getPatientInformation() {
                $.ajax({

                    type: "GET",
                    cache: false,
                    url: "@(@Url.Action("PatientInformation", "InPatientDischarge", new {Area = "PatientInformation" }))",
                    data: { "PatientId": $("#PatientId").val(), "PatientCode": $("#txtPatientCode").val() },
                    dataType: "html",
                    success: function (result) {

                        var t = JSON.parse(result);

                        $('#txtPatientName').val(t.PatientName);
                        $('#PatientName').val(t.PatientName);
                        $('#PatientCode').val(t.PatientCode);
                        $('#CabinId').val(t.CabinId);
                        $('#VoucherNo').val(t.VoucherNo);
                        $('#CabinPrice').val(t.CabinPrice);
                        $('#PackageId').val(t.PackageId);
                        $('#PackageName').val(t.PackageName);
                        $('#PackageAmount').val(t.PackageAmount);
                        $('#AdmissionFee').val(t.AdmissionFee);
                        $('#TransferredCabinName').val(t.TrasferCabin);
                        $('#TransferredCabinPrice').val(t.TrasferCabinPrice);
                        $('#TransferredCabinBill').val(t.CabinTransferBill);
                        $('#AdmissionNo').val(t.AdmissionNo);


                        var dateString = (t.DateOfAdmission).substr(6);
                        var currentTime = new Date(parseInt(dateString));
                        var month = currentTime.getMonth() + 1;
                        var day = currentTime.getDate();
                        var year = currentTime.getFullYear();
                        var date = month + "/" + day + "/" + year;
                        $('#DateOfAdmission').val(date);
                        getDailyBill();
                        getDailyDoctorBill();
                        getAllBills();
                    },
                    error: function (error) {
                        //Metronic.unblockUI();
                        var msg = 'Fail to load .';
                        alert(msg);
                    }
                });
            }

            function getDailyBill() {

                var loadArea = $("#getDailyBill");
                $.ajax({

                    type: "GET",
                    cache: false,
                    url: "@(@Url.Action("getDailyBill", "InPatientDischarge", new {Area = "PatientInformation" }))",
                    data: { "PatientId": $("#PatientId").val(), "PatientCode": $("#txtPatientCode").val() },
                    dataType: "html",
                    success: function (result) {

                        loadArea.html(result);
                        //getDailyDrugBill();
                        //getDailyDrugReturnBill();
                    },
                    error: function (error) {
                        //Metronic.unblockUI();
                        var msg = 'Fail to load .';
                        alert(msg);
                    }
                });
            }
            function getDailyDoctorBill() {

                var loadArea = $("#getDailyDoctorBill");
                $.ajax({

                    type: "GET",
                    cache: false,
                    url: "@(@Url.Action("getDailyDoctorBill", "InPatientDischarge", new {Area = "PatientInformation" }))",
                    data: { "PatientId": $("#PatientId").val(), "PatientCode": $("#txtPatientCode").val() },
                dataType: "html",
                success: function (result) {

                    loadArea.html(result);
                    getDailyDrugBill();
                },
                error: function (error) {
                    //Metronic.unblockUI();
                    var msg = 'Fail to load .';
                    alert(msg);
                }
            });
            }
            function getDailyDrugBill() {

                var loadArea = $("#DrugBill");
                $.ajax({

                    type: "GET",
                    cache: false,
                    url: "@(@Url.Action("drugBill", "InPatientDischarge", new {Area = "PatientInformation" }))",
                    data: { "PatientId": $("#PatientId").val(), "PatientCode": $("#txtPatientCode").val() },
                dataType: "html",
                success: function (result) {

                    loadArea.html(result);
                    getDailyTestBill();
                    getDailyDrugReturnBill();
                },
                error: function (error) {
                    //Metronic.unblockUI();
                    var msg = 'Fail to load .';
                    alert(msg);
                }
            });
            }

            function getDailyDrugReturnBill() {

                var loadArea = $("#DrugReturnBill");
                $.ajax({

                    type: "GET",
                    cache: false,
                    url: "@(@Url.Action("drugReturnBill", "InPatientDischarge", new {Area = "PatientInformation" }))",
                    data: { "PatientId": $("#PatientId").val(), "PatientCode": $("#txtPatientCode").val() },
                dataType: "html",
                success: function (result) {

                    loadArea.html(result);
                    //getDailyTestBill();

                },
                error: function (error) {
                    //Metronic.unblockUI();
                    var msg = 'Fail to load .';
                    alert(msg);
                }
            });
            }
            function getDailyTestBill() {

                var loadArea = $("#TestBill");
                $.ajax({

                    type: "GET",
                    cache: false,
                    url: "@(@Url.Action("testBill", "InPatientDischarge", new {Area = "PatientInformation" }))",
                    data: { "PatientId": $("#PatientId").val(), "PatientCode": $("#txtPatientCode").val() },
                dataType: "html",
                success: function (result) {

                    loadArea.html(result);

                },
                error: function (error) {
                    //Metronic.unblockUI();
                    var msg = 'Fail to load .';
                    alert(msg);
                }
            });
            }



            function getAllBills() {
                $.ajax({

                    type: "GET",
                    cache: false,
                    url: "@(@Url.Action("PatientBill", "InPatientDischarge", new {Area = "PatientInformation" }))",
                    data: { "PatientId": $("#PatientId").val(), "PatientCode": $("#txtPatientCode").val() },
                    dataType: "html",
                    success: function (result) {

                        var t = JSON.parse(result);
                        $('#InPatientDailyBill').val(t.PatientDailyBill);
                        $('#InPatientDrugBill').val(t.PatientDrugBill);
                        $('#TotalBill').val(t.SubTotal);
                        $('#InPatientAdvanceAmount').val(t.AdvanceAmount);
                        $('#InPatientDoctorBills').val(t.InPatientDoctorBills);
                        $('#InPatientTotalTestBills').val(t.InPatientTotalTestBills);
                        $('#ICUBill').val(t.ICUBill);
                        $('#OtBill').val(t.sumOTBILL);
                        //dueAmount();
                        getNoOfDays();
                    },
                    error: function (error) {
                        //Metronic.unblockUI();
                        var msg = 'Fail to load .';
                        alert(msg);
                    }
                });
            }



            function getNoOfDays() {
                $.ajax({

                    type: "GET",
                    cache: false,
                    url: "@(@Url.Action("NoOfDays", "InPatientDischarge", new {Area = "PatientInformation" }))",
                    data: { "AdmissionDate": $("#DateOfAdmission").val(), "DischargeDate": $("#DischargeDate").val() },
                dataType: "html",
                success: function (result) {

                    //var t = JSON.parse(result);



                    $('#NoOfDays').val(result);

                    getTotalCabinPrice();


                },
                error: function (error) {
                    //Metronic.unblockUI();
                    var msg = 'Fail to load .';
                    alert(msg);
                }
            });
            }




            function getTotalCabinPrice() {
                $.ajax({

                    type: "GET",
                    cache: false,
                    url: "@(@Url.Action("TotalCabinPrice", "InPatientDischarge", new {Area = "PatientInformation" }))",
                    data: { "NoOfDays": $("#NoOfDays").val(), "CabinPrice": $("#CabinPrice").val(), "TotalBill": $("#TotalBill").val(), "DrugBill": $("#InPatientDrugBill").val(), "PatientCode": $("#txtPatientCode").val(), "PackageAmount": $("#PackageAmount").val(), "ICUBill": $("#ICUBill").val(), "AdmissionFee": $("#AdmissionFee").val(), "OtBill": $("#OtBill").val(), "TransferredCabinBill": $("#TransferredCabinBill").val(), "AdmissionNo": $("#AdmissionNo").val() },
                dataType: "html",
                success: function (result) {

                    var t = JSON.parse(result);



                    $('#CabinAmount').val(t.CabinBill);
                    $('#TotalBill').val(t.TotalPatientBill);
                    $('#ServiceCharge').val(t.ServiceCharge);
                    //getTotalCabinPrice();
                    dueAmount();

                },
                error: function (error) {
                    //Metronic.unblockUI();
                    var msg = 'Fail to load .';
                    alert(msg);
                }
            });
            }
            function dueAmount() {
                $.ajax({

                    type: "GET",
                    cache: false,
                    url: "@(@Url.Action("DueBill", "InPatientDischarge", new {Area = "PatientInformation" }))",
                    data: { "SubTotal": $("#TotalBill").val(), "AdvanceAmount": $("#InPatientAdvanceAmount").val() },
                dataType: "html",
                success: function (result) {

                    var t = JSON.parse(result);


                    $('#ReturnAmount').val(t.ReturnAmount);
                    $('#DueAmount').val(t.DueAmount);




                },
                error: function (error) {
                    //Metronic.unblockUI();
                    var msg = 'Fail to load .';
                    alert(msg);
                }
            });
            }


            function PrintCopy() {

                var loadArea = $("#");
                $.ajax({

                    type: "GET",
                    cache: false,
                    url: "@(@Url.Action("PrintCopy", "InPatientDischarge", new {Area = "PatientInformation" }))",
                    data: { "PatientId": $("#PatientId").val(), "PatientCode": $("#txtPatientCode").val() },
                dataType: "html",
                success: function (result) {

                    loadArea.html(result);

                },
                error: function (error) {
                    //Metronic.unblockUI();
                    var msg = 'Fail to load .';
                    alert(msg);
                }
            });
            }



            function Calculate() {
                //document.getElementById('DueAmount').value = parseFloat(document.getElementById('DueAmount').value) - parseFloat(document.getElementById('Discount').value);
                //var dis = parseFloat($('#DueAmount').val());
                //alert(dis);
                var dis = parseFloat(document.getElementById('DueAmount').value);
                var num = parseFloat(document.getElementById('Discount').value);
                ///var num = parseFloat($('#Discount').val());
                var total = document.getElementById('AfterHospital');
                var val = (dis - num);
                ////  console.log(val)
                ////$('#DueAmount').val(val);
                total.value = val;
                //document.getElementById('DueAmount').value = val;
            }

            function Calculate1() {
                //document.getElementById('DueAmount').value = parseFloat(document.getElementById('DueAmount').value) - parseFloat(document.getElementById('Discount').value);
                //var dis = parseFloat($('#DueAmount').val());
                //alert(dis);
                var dis = parseFloat(document.getElementById('AfterHospital').value);
                var num = parseFloat(document.getElementById('DoctorDiscount').value);
                ///var num = parseFloat($('#Discount').val());
                var total = document.getElementById('AfterDoctor');
                var total1 = document.getElementById('ReturnAmount');
                var val = (dis - num);
                ////  console.log(val)
                ////$('#DueAmount').val(val);
                total.value = val;
                total1.value = val;
                //document.getElementById('DueAmount').value = val;
            }
    </script>
}
